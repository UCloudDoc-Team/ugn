<!--一下子提供一种思路，欢迎大家发挥 -->

# 云联网产品介绍

## 产品概述

### 什么是UGN云联网？

云联网（UCloud Global Network，简称UGN）是UCloud基于Segment Routing技术推出的新一代全球化网络产品，可帮助用户快速、灵活的构建出一张企业级的全球网络，实现全球全地域云上、云下网络资源互联互通。
云联网的典型使用场景如下：
VPC与VPC之间高速稳定的内网互联，例如：
*   在线教育/在线直播行业的多地域业务部署，要求音视频系统实时同步
*   游戏加速行业要求多地域内网互联，实现高速稳定的互通互访
*   业务多地部署，要求实现多地域容灾
  
VPC与云下私有站点之间的内网互联（云联网二期，敬请期待）：
*  多门店之间网络互联互通
*  多处私有站点/办公室与云上资VPC资源互联互通
*  跨境/跨地域的办公、业务数据同步
*  
![image](https://user-images.githubusercontent.com/108066029/229448865-8e74514a-fb82-4834-bfb4-1f25e6ee59b4.png)


### 云联网组成部分

云联网（UCloud Global Network，简称UGN）产品是UCloud基于Segment Routing技术推出的新一代全球化网络服务产品，实现用户不同地域VPC之间，VPC与本地数据中心、托管网络、ECN网络之间搭建云上、云下一体化的客户私有网络。帮助用户构建一张企业级的全球化网络。

云联网是项目级别产品，一个项目下可以创建多个云联网网实例；云联网实例没有地域属性，是一个全球级别产品。

* 云联网实例：云联网实例是创建、管理一体化云上智能网络的基础资源，一个云联网实例包含关联一个或多个网络实例类型，如：私有网络实例UVPC、ECN网关实例等。

* 网络实例：云联网支持两种网络实例，实现用户云上资源互通、跨地域资源互通、云上和云下资源的互通。
    * 私有网络实例UVPC：公有云客户自定义私有网络产品，关联云联网可以实现跨VPC互通、以及跨地域网络互通。
    * POPGW网关实例（云联网二期，敬请期待）：POPGW网关部署于UCloud 骨干网核心节点，北向对接全球骨干网，南向通过Internet以及专线对接到用户私有站点自用设备或者租用的UCloud CPE智能网关。POPGW网关实例关联云联网后，可以实现用户多分支站点与VPC网络、托管/IDC网络互联互通。
* 带宽包：用户创建云联网，并将网络实例加入云联网后，会有5kbps的带宽速率用于测试连通性.
    * 如果用户的网络实例属于同地域，则加入云联网即可实现同地域业务通信，同地域网络实例之间没有带宽限速。
    * 如果用户的网络实例属于不同地域，用户需要绑定云联网跨域带宽包才能正常进行业务通信。用户需根据自己网络实例所属地域，开通点到点之间的跨域带宽包，从而实现跨域的数据转发。


### 产品功能

**全球联网：跨云跨域，全球互通**

UCloud骨干网络遍布全球主要的国家和地域，二十三个节点可支持用户各种异构异地的网络灵活接入，即开即用，实现各网络实例之间灵活便捷的互联互通。

**带宽保障：多元业务，按需选择**

云联网产品为用户提供专线质量保障服务，同时支持：钻石（质量最优）、铂金（质量均衡）、黄金（成本敏感）三种服务质量，可根据业务灵活选择；

| **服务质量** | **说明**             | **适用场景**                           |
| :----------- | :------------------- | :------------------------------------- |
| 钻石         | 优先调度，优先转发； | 支付等网络质量要求较高的场景；         |
| 铂金         | 调度次之，转发次之； | 游戏等场景；                           |
| 黄金         | 普通调度，尽力转发； | 上传、下载等对服务质量要求一般的场景； |

**智能选路：多元业务，按需选择【云联网二期，敬请期待】**

基于SR-TE技术实现用户业务的灵活路径选择，用户可在控制台上进行选择：低时延、通用线路、低成本；控制台上通过选择S（Source）--->D（Destination）地域，然后选择具体的调度路径；

- 通用线路（IGP） ： S（Source）--->D（Destination） 沿着最短路径进行数据转发

- 低时延线路（Delay）： S（Source）--->D（Destination） 沿着最低时延路径进行数据转发

- 低成本线路（TCO）   ： S（Source）--->D（Destination） 沿着最优成本路径进行数据转发


**非对称带宽：反向带宽，让利促销**

部分地域支持非对称带宽让利售卖（即线路出向带宽：入向带宽不等于1:1），用户可根据自己的业务流量模型选购非对称带宽，节省成本。


**稳定可靠：刚性管道双平面保护**

底层架构同时提供专线骨干网和公网VPN双管道保障业务的可靠性；

各个网络接入点和转发设备采用分部署集群化部署，全网链路冗余部署，确保网络环境的高可用性；



**高易用性：一键组网，即开即用**

提供控制台WEB管理界面，支持用户直接在WEB界面上进行各种灵活的网络配置，一键组网；


**高安全性：网络隔离，专网专用**

跨境线路资质以及申请报备流程符合监管要求，公网数据传输通过隧道技术进行数据加密，保证业务流程的合规性和业务数据传输的安全性；



**灵活计费：多种计费，灵活选择**

同时支持固定带宽、增强95等多种计费方式，可灵活选择；



### 云联网和UDPN功能对比

**`云联网与VPC网络互联/UDPN区别`**

使用云联网之前，如果您想要实现同地域多个 VPC网络之间互通，需要为跨域VPC 间两两分别建立对等连接。如果您想要实现跨地域多个 VPC网络之间互通，需要为跨域VPC间两两分别建立UDPN隧道实现跨地域网络资源互通。

上述场景如果使用云联网，您只需创建一个云联网实例，将需要互联的同地域/跨地域 VPC网络加入到该云联网中，即可实现所有网络之间的互通。云联网的路由自动转发及学习，使您只需一次操作将实例加入到云联网中，无需再手动配置、管理各实例的路由表。

**【UDPN连接示意图】**
![UDPN连接示意图](images/UGN文档/UDPN连接示意图.png)


**【UGN云联网连接示意图】**
![UGN云联网连接示意图](images/UGN文档/UGN云联网连接示意图.png)



| **产品特性**      | **VPC网络互联/UDPN**                     | **云联网**                             |
| :---------------- | :--------------------------------------- | :------------------------------------- |
| **网络互联**      | N个VPC间全部联通需要建立Cn2条UDPN连接    | 加入云联网后实现全互联                 |
| **路由学习**      | 每条UDPN均需配置路由链路变更需要手工更新 | 路由自动学习下发动态更新，无需手工维护 |
| **包头开销**      | VXLAN+NVGRE，开销大                      | MPLS标签压缩，开销小                   |
| **服务质量** | 不支持                                   | 支持QoS区分服务质量                    |
| **智能路径**      | 不支持                                   | 支持最短路径、最低时延、最优成本路径   |
| **非对称带宽**      | 不支持                                   | 部分地域支持非对称带宽让利售卖，更省成本   |
| **转发性能**      | sdngw单机性能差（ovs+tc)                 | P4, ovs-meter，性能大幅提高            |



### 支持地域

| **大陆资源** | 华北一（北京）、上海、广州|
| :----------- | :----------------------------------------------- |
| **境外资源** | 香港                                       |

云联网二期预计新增地域：新加坡、首尔、洛杉矶、法兰克福，敬请期待。

## 产品架构

### 产品模型

![UGN产品模型](images/UGN文档/UGN产品模型.jpg)

- 整合用户网、混合云、云网络等实现底层统一组网，统一产品；

- 云联网由网络实例、路由表、带宽包等组成；

- 全网互联，轻松管理，实现多节点路由自动学习分发；

- 基于SR-TE技术，支持通用线路、低时延、低成本等智能路径调度；

- 基于QoS服务，实现等不同品质的线路产品。



### 技术实现
![UGN技术实现](images/UGN文档/UGN技术实现.jpg)

- **云网融合**

每个地域网元由业务网关（VPC网关、POPGW、托管网关、专线网关）和跨域网关（RPG）组成的一个整体网元结构，实现用户公有云、SD-WAN网络灵活组网。

- **流量工程**

云联网底层网络通过Segment Routing （简称SR）技术简化骨干网复杂度，实现包头压缩和流量工程，支持多种路径调度能力。

- **刚性/弹性带宽**

骨干网出口位置通过部署QoS服务，实现带宽保证和弹性带宽。

- **降低转发成本**

转发面采用MPLS技术取代VXLAN+NVGRE技术，实现包头压缩，提升转发效率，降低成本。



## 应用场景

### **云上同域资源互访**

同地域多个服务之间需要实现逻辑互联互访，业务数据传输和客户业务直接相关，需要保证数据的保密性、安全性和传输可靠性。同时需要支持对业务的灵活配置、切换、访问控制等高效运维工作场景。

**解决方案**

- 单地域部署多个VPC实例；

- 部署云联网实例 ，加载该地域内全部VPC实例，构建同地域VPC访问；
![同地域VPC互访](images/UGN文档/VPC同地域互访.png)

###  云上跨域资源互访

公有云资源遍布全球，服务之间需要实现逻辑互联互访，业务数据传输和客户业务直接相关，需要保证数据的保密性、安全性和传输可靠性。同时需要支持对业务的灵活配置、切换、访问控制等高效运维工作场景。

**解决方案**

- 多地域部署VPC实例；

- 部署云联网实例 ，加载全球VPC实例，构建跨地域访问；

- 智能选路服务支持用户选择最低时延避免绕行网络带来业务受损；
![VPC跨地域互访](images/UGN文档/VPC跨地域互访.png)




## 使用限制

### **产品配额限制**
| **配额名称**      | **默认配额**                     
| :---------------- |:---------------- |
| 主账号下云联网实例数量      | 5 
| 云联网内可绑定网络实例数量      | 20
| 云联网内可加入地域数量     | 10               
| 云联网内各地域路由条目数量      | 10                             



### **路由限制**
由于云联网可以使多网络实例互通，为使各实例间顺利互通，需要加入云联网的VPC实例之间，不可以出现子网重叠。当两个VPC的子网重叠或冲突，则无法加入云联网。

   

### 产品调配限制

1.  带宽包额度调整：控制台上默认允许用户对带宽包大小进行调升调降，允许删除带宽包。
2. 暂不支持用户在控制台对带宽包的服务等级和智能路径进行切换。
3. 当前支持的计费方式为固定带宽计费和Max5峰值计费。允许用户在控制台对计费方式进行切换，切换频率每月一次，默认次月0点生效。
4. 允许用户在控制台对非对称带宽的非对称比例进行切换，切换频率每月一次，次月0点生效。

需要调整其他参数，请提交工单或者联系客户经理；



### **其他使用限制**

各个资源对象之间有如下的归属关系以及配额限制：
1. 一个云联网实例属于一个项目的；
      1. 删除云联网时，要将下属的资源全部删除；
      2. 单个账号下可创建的UGN实例配额数量指的是主账号下的配额限制；
      
2. 一个 云联网 实例可以关联最多 20 个网络实例：
      1. 网络实例存在打通关系时，不可以被加入UGN 实例；
      2. 一个网络实例仅可以加入一个 UGN 实例；
      3. 一个UGN 实例可以包含当前子账号有权限的不同项目的网络实例；
      4. 仅签署跨境合同后，才可以将具有跨境关系的网络实例加入UGN实例；
      5. 跨境合同到期/失效后，已经加入UGN实例的网络实例无需退出，此时仍可以加入新的网络实例；
      6. 批量绑定/解绑相同的网络实例时，返回错误；
      
3. 一个云联网实例可以关联同主账号下多个项目的网络实例：

4. 任意两个跨域网络实例需要通信时，需要在该地域对之间存在带宽包：
      1. 任何两个存在网络实例的地域之间必须且仅可以存在一个带宽包，一个地域可以与多个地域之间同时存在带宽包；
      2. 一个带宽包只能同时绑定一个云联网实例；
      3. 当 云联网 实例内两个不同地域初次加入网络实例时，会自动为该条线路创建默认带宽包；
      4. 默认带宽包限速 5kb，除不计费之外，和自定义带宽包一致；
      5. 一条线路购买自定义带宽包之后，默认带宽包会被删除；
      6. 自定义带宽包删除时，会重新自动创建默认带宽包；
      7. 仅当一条线路的两端地域都存在网络实例时，才可以创建自定义带宽包；
      8. 仅当自定义带宽包被删除后，才可以将其涉及地域的网络实例全部退出云联网 实例；
      9. 仅签署跨境合同后，才可以创建跨境带宽包（包含默认带宽包和自定义带宽包）
